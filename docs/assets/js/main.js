"use strict";const seriesListEl=document.querySelector(".series__list"),inputEl=document.querySelector(".search"),buttonEl=document.querySelector(".btn"),favouriteListEl=document.querySelector(".favourites__list"),savedFavourites=JSON.parse(localStorage.getItem("favourites"));let favouritesArray=savedFavourites||[];const deleteButtonEl=document.querySelector(".btn__delete");function containsObject(e,t){for(let i=0;i<t.length;i++)return e.id===t[i].id}printFavourites();const printerSeries=e=>{for(let t of e){const e=t.show,i=e.name,r=e.id,s=document.createElement("li"),o=document.createElement("h3"),n=document.createElement("img"),a=document.createTextNode(i),l=e.image;if(l){const e=l.medium;n.src=e}else n.src="https://via.placeholder.com/210x295/444444/ffffff/?text="+i;n.alt="Cartel de la serie "+i,o.classList.add("show-title"),s.classList.add("show__element"),s.classList.add("no-favourite"),s.setAttribute("id",r),o.appendChild(a),s.appendChild(n),s.appendChild(o),seriesListEl.appendChild(s)}};function printFavourites(){for(let e of favouritesArray){const t=e.name,i=document.createElement("li"),r=document.createElement("h3"),s=document.createElement("div"),o=document.createTextNode(t),n=e.image,a=e.id;i.classList.add("favourite"),s.classList.add("little-image"),r.classList.add("little-name"),s.setAttribute("style",`background-image:url("${n}"`),r.appendChild(o),i.appendChild(s),i.appendChild(r),i.setAttribute("id",a),favouriteListEl.appendChild(i)}}const likeThisShow=e=>{const t=e.currentTarget,i=t.childNodes[0].src,r=t.childNodes[1].innerHTML,s=t.getAttribute("id");t.classList.toggle("like");const o={};o.name=r,o.image=i,o.id=s,containsObject(o,favouritesArray)||(favouritesArray.push(o),favouriteListEl.innerHTML="",localStorage.setItem("favourites",JSON.stringify(favouritesArray)),printFavourites()),o={}},likeShow=()=>{const e=document.querySelectorAll(".no-favourite");for(let t of e)t.addEventListener("click",likeThisShow)};function searchSeries(){seriesListEl.innerHTML="";const e=inputEl.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(function(e){return e.json()}).then(function(e){printerSeries(e),likeShow()})}const removeFavourites=()=>{localStorage.removeItem("favourites"),favouriteListEl.innerHTML="",favouritesArray=[],console.log(seriesListEl.children);const e=seriesListEl.children;for(let t of e)t.classList.remove("like")};buttonEl.addEventListener("click",searchSeries),deleteButtonEl.addEventListener("click",removeFavourites);