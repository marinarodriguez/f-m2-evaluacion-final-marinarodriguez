"use strict";console.log(">> Ready :)");const seriesListEl=document.querySelector(".series__list"),inputEl=document.querySelector(".search"),buttonEl=document.querySelector(".btn"),favouriteListEl=document.querySelector(".favourites__list"),savedFavourites=JSON.parse(localStorage.getItem("favouritesArray")),favouritesArray=savedFavourites||[];function printerSeries(e){for(let t of e){const e=t.show,r=e.name,i=document.createElement("li"),s=document.createElement("h3"),o=document.createElement("img"),a=document.createTextNode(r),n=e.image;if(n){const e=n.medium;o.src=e,o.alt="Cartel de la serie "+r}else o.src="https://via.placeholder.com/210x295/444444/ffffff/?text="+r,o.alt="Cartel de la serie "+r;s.classList.add("show-title"),i.classList.add("show__element"),i.classList.add("no-favourite"),s.appendChild(a),i.appendChild(o),i.appendChild(s),seriesListEl.appendChild(i)}}function printFavourites(){for(let e of favouritesArray){const t=e.name,r=document.createElement("li"),i=document.createElement("h3"),s=document.createElement("img"),o=document.createTextNode(t),a=e.image;r.classList.add("favourite"),s.src=a,i.appendChild(o),r.appendChild(s),r.appendChild(i),favouriteListEl.appendChild(r)}}function likeShow(){const e=document.querySelectorAll(".no-favourite");for(let r of e)r.addEventListener("click",t);function t(e){const t=e.currentTarget,r=t.childNodes[0].src,i=t.childNodes[1].innerHTML;if(t.classList.toggle("like"),t.classList.contains("no-favourite")){let e={};e.name=i,e.image=r,favouritesArray.push(e),console.log(favouritesArray),favouriteListEl.innerHTML="",t.classList.remove("no-favourite"),localStorage.setItem("favouritesArray",JSON.stringify(favouritesArray)),printFavourites()}}}function searchSeries(){seriesListEl.innerHTML="";const e=inputEl.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(function(e){return e.json()}).then(function(e){printerSeries(e),likeShow()})}printFavourites(),buttonEl.addEventListener("click",searchSeries);