"use strict";const seriesListEl=document.querySelector(".series__list"),inputEl=document.querySelector(".search"),buttonEl=document.querySelector(".btn"),favouriteListEl=document.querySelector(".favourites__list"),savedFavourites=JSON.parse(localStorage.getItem("favourites"));let favouritesArray=savedFavourites||[];const deleteButtonEl=document.querySelector(".btn__delete");function printFavourites(){for(let e of favouritesArray){const t=e.name,i=document.createElement("li"),r=document.createElement("h3"),s=document.createElement("div"),o=document.createTextNode(t),a=e.image,l=e.id;i.classList.add("favourite"),s.classList.add("little-image"),r.classList.add("little-name"),s.setAttribute("style",`background-image:url("${a}"`),r.appendChild(o),i.appendChild(s),i.appendChild(r),i.setAttribute("id",l),favouriteListEl.appendChild(i)}}printFavourites();const printerSeries=e=>{for(let t of e){const e=t.show,i=e.name,r=e.id,s=document.createElement("li"),o=document.createElement("h3"),a=document.createElement("img"),l=document.createTextNode(i),n=e.image;if(o.classList.add("show-title"),s.classList.add("show__element"),s.classList.add("no-favourite"),s.setAttribute("id",r),o.appendChild(l),s.appendChild(a),s.appendChild(o),seriesListEl.appendChild(s),a.alt="Cartel de la serie "+i,n){const e=n.medium;a.src=e}else a.src="https://via.placeholder.com/210x295/444444/ffffff/?text="+i}},containsObject=(e,t)=>{for(let i=0;i<t.length;i++)if(e.id===t[i].id)return!0},likeThisShow=e=>{const t=e.currentTarget,i=t.childNodes[0].src,r=t.childNodes[1].innerHTML,s=t.getAttribute("id");t.classList.add("like");let o={};o.name=r,o.image=i,o.id=s,containsObject(o,favouritesArray)||(favouritesArray.push(o),favouriteListEl.innerHTML="",localStorage.setItem("favourites",JSON.stringify(favouritesArray)),printFavourites())},likeShow=()=>{const e=document.querySelectorAll(".no-favourite");for(let t of e)t.addEventListener("click",likeThisShow)},searchSeries=()=>{seriesListEl.innerHTML="";const e=inputEl.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(function(e){return e.json()}).then(function(e){printerSeries(e),likeShow()})},removeAllFavourites=()=>{localStorage.removeItem("favourites"),favouriteListEl.innerHTML="",favouritesArray=[];const e=seriesListEl.children;for(let t of e)t.classList.remove("like")};buttonEl.addEventListener("click",searchSeries),deleteButtonEl.addEventListener("click",removeAllFavourites);